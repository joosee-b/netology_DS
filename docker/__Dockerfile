# как запускать
# sudo docker-compose --project-name postgres-client -f docker-compose.yml up --build -d
# sudo docker-compose --project-name postgres-client -f docker-compose.yml run --rm postgres-client
# psql --host $APP_POSTGRES_HOST -U postgres

FROM alpine:edge

RUN echo "http://dl-8.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories

RUN apk update && apk upgrade && apk --no-cache --update-cache add postgresql-client su-exec curl nano

ARG APP_POSTGRES_HOST
ARG APP_POSTGRES_PORT

ENV  APP_POSTGRES_HOST=${APP_POSTGRES_HOST}
ENV  APP_POSTGRES_PORT=${APP_POSTGRES_PORT}

COPY ./src/* /home/

WORKDIR /home

RUN chmod +x load_data.sh

RUN env
# RUN ./load_data.sh
